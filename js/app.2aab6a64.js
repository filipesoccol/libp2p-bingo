(function(t){function e(e){for(var s,o,a=e[0],c=e[1],u=e[2],p=0,l=[];p<a.length;p++)o=a[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&l.push(r[o][0]),r[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(l.length)l.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},r={app:0},i=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/libp2p-bingo/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var d=c;i.push([1,"chunk-vendors"]),n()})({0:function(t,e){},"013a":function(t,e,n){"use strict";var s=n("db32"),r=n.n(s);e["default"]=r.a},"034f":function(t,e,n){"use strict";var s=n("85ec"),r=n.n(s);r.a},1:function(t,e,n){t.exports=n("56d7")},"115d":function(t,e,n){"use strict";var s=n("861b"),r=n.n(s);r.a},2:function(t,e){},3:function(t,e){},4:function(t,e){},"4fa5":function(t,e,n){"use strict";var s=n("db5d"),r=n.n(s);r.a},5:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("a026"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.connected?n("div",{attrs:{id:"app"}},[n("peer-header"),n("router-view")],1):t._e()},i=[],o=(n("96cf"),n("1da1")),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"peer-header"},[n("div",[t._v("Your ID: "+t._s(t.peerId))]),n("div",{staticClass:"peer-nick"})])},c=[],u={name:"peer-name",data:function(){return{nickname:""}},methods:{setNickname:function(){console.log(this.nickname)}}},d=u,p=(n("8baf"),n("2877")),l=Object(p["a"])(d,a,c,!1,null,null,null),f=l.exports,h={name:"app",components:{"peer-header":f},data:function(){return{connected:!1}},mounted:function(){this.startPubsub()},methods:{startPubsub:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$startLibp2p();case 2:t.connected=!0;case 3:case"end":return e.stop()}}),e)})))()}}},b=h,m=(n("034f"),Object(p["a"])(b,r,i,!1,null,null,null)),v=m.exports,w=n("8c4f"),g=n("3591"),y=n("6101"),_=n("b04a"),k=n("d6e3"),O=n("2b27"),x=n("2f0b"),S={install:function(t){t.prototype.$startLibp2p=Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g.create({addresses:{listen:["/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star","/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star"]},modules:{transport:[y,_],streamMuxer:[k],connEncryption:[O],pubsub:x},config:{pubsub:{enabled:!0,emitSelf:!0}}});case 2:return n=e.sent,n.connectionManager.on("peer:connect",(function(t){console.log("Connected to ".concat(t.remotePeer))})),n.connectionManager.on("peer:disconnect",(function(t){console.log("Disconnected from ".concat(t.remotePeer.toB58String()))})),e.next=7,n.start();case 7:return t.mixin({data:function(){return{libp2p:n,peerId:n.peerId.toB58String()}}}),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))}},L=S,j=n("72c5"),P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%",height:"100%"}},[n(t.station,{tag:"component"})],1)},N=[],C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.connected?n("div",{staticClass:"view-board"},[n("div",{staticClass:"view-words"},t._l(t.wordsHost,(function(e,s){return n("p",{key:s+e,staticClass:"available-words"},[t._v(t._s(e))])})),0),n("div",{staticClass:"view-guest"},[n("div",{staticStyle:{width:"100%"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],attrs:{placeholder:"Choose your name"},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}}),n("button",{on:{click:t.selectName}},[t._v("Select Name")])]),t._l(t.wordsList,(function(e,s){return n("button",{key:s,class:{"chosen-word":!0,red:t.scored.includes(s)},attrs:{tabindex:"-1"},on:{click:function(e){return t.scoreWord(s)}}},[t.step<2?n("input",{directives:[{name:"model",rawName:"v-model",value:t.wordsList[s],expression:"wordsList[idx]"}],staticClass:"word-input",attrs:{placeholder:"Type a word"},domProps:{value:t.wordsList[s]},on:{blur:function(e){return t.chosenWords()},input:function(e){e.target.composing||t.$set(t.wordsList,s,e.target.value)}}}):n("span",[t._v(t._s(t.wordsList[s]))])])}))],2)]):t._e()},I=[],$=(n("c740"),n("a434"),n("b0c0"),n("d3b7"),n("25f0"),{data:function(){return{connected:!1,step:0,host:"",isLocked:!1,nickname:"",wordsHost:[],wordsList:[],chosen:[],scored:[]}},mounted:function(){var t=this;this.host=this.$route.params.room,this.host!==this.peerId&&this.libp2p.pubsub.subscribe(this.host,(function(e){t.receivedMessage(e.from,e.data.toString())}))},methods:{selectName:function(){var t={type:"join",message:this.nickname};this.libp2p.pubsub.publish(this.host,JSON.stringify(t))},addWord:function(){this.wordsList.push("")},chosenWords:function(){var t={type:"chosen",message:this.wordsList};this.libp2p.pubsub.publish(this.host,JSON.stringify(t))},scoreWord:function(t){if(!(this.step<2)){var e=this.scored.findIndex((function(e){return e===t}));e>=0?this.scored.splice(e,1):this.scored.push(t),this.scoredWord()}},scoredWord:function(){var t={type:"scored",message:this.scored};this.libp2p.pubsub.publish(this.host,JSON.stringify(t))},receivedMessage:function(t,e){try{var n=JSON.parse(e),s=n.type,r=n.message;switch(console.log(t,s,r),s){case"ping":this.connected=!0,this.step=r;break;case"words":this.wordsHost=r;break;case"quantity":this.wordsList.length!==r&&(this.wordsList=new Array(r));break;case"player":this.peerId!==r.peer&&this.nickname!==r.name||(this.nickname=r.name,this.wordsList=r.words,this.scored=r.scored);break}}catch(i){console.log(i)}}}}),W=$,M=(n("115d"),Object(p["a"])(W,C,I,!1,null,"4533a4d3",null)),J=M.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[0===t.step?n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.words,expression:"words"}],attrs:{rows:"6",cols:"40",placeholder:"Type words separated by space"},domProps:{value:t.words},on:{input:function(e){e.target.composing||(t.words=e.target.value)}}}),n("p",[t._v("Total Words: "+t._s(t.wordsList.length))]),n("p",[t._v("Quantity: "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],attrs:{type:"number"},domProps:{value:t.quantity},on:{input:function(e){e.target.composing||(t.quantity=e.target.value)}}})]),n("button",{on:{click:t.startGame}},[t._v("Start Game")])]):n("div",{staticClass:"view-board"},[n("div",{staticClass:"view-words"},[n("button",{on:{click:t.draftWord}},[t._v("Draft Word")]),t._l(t.drafted,(function(e,s){return n("p",{key:s,staticClass:"drafted-words"},[t._v(t._s(s+1)+" - "+t._s(e))])})),t._l(t.wordsList,(function(e,s){return n("p",{key:s+e,staticClass:"available-words"},[t._v(t._s(e))])}))],2),n("div",{staticClass:"view-players"},t._l(t.players,(function(e,s){return n("div",{key:s,staticClass:"player-holder"},[n("span",{staticClass:"player-name"},[t._v(t._s(e.name))]),t._l(e.words,(function(s,r){return n("span",{key:r,class:{"available-words":e.scored.includes(r),"player-word":!0}},[t._v(" "+t._s(s)+" ")])}))],2)})),0)])])},E=[],T=(n("99af"),n("7db0"),n("ac1f"),n("1276"),n("498a"),{data:function(){return{step:0,words:"",quantity:9,wordsList:[],drafted:[],players:[]}},mounted:function(){var t=this;this.host=this.$route.params.room,this.host===this.peerId&&(this.libp2p.pubsub.subscribe(this.peerId,(function(e){t.receivedMessage(e.from,e.data.toString())})),setInterval((function(){t.sendPing()}),2e3))},watch:{words:function(){this.wordsList=this.words.trim().split(" ")}},methods:{startGame:function(){this.step=1},sendPing:function(){var t={type:"ping",message:this.step};this.libp2p.pubsub.publish(this.peerId,JSON.stringify(t))},sendWords:function(){var t={type:"words",message:this.wordsList};this.libp2p.pubsub.publish(this.peerId,JSON.stringify(t)),t={type:"quantity",message:this.quantity},this.libp2p.pubsub.publish(this.peerId,JSON.stringify(t))},sendPlayer:function(t){var e={type:"player",message:t};this.libp2p.pubsub.publish(this.peerId,JSON.stringify(e))},draftWord:function(){this.step=2;var t=Math.random()*this.wordsList.length;this.drafted=this.drafted.concat(this.wordsList.splice(t,1))},receivedMessage:function(t,e){try{var n=JSON.parse(e),s=n.type,r=n.message;switch(console.log(t,s,r),s){case"join":var i=this.players.find((function(e){return e.peer===t||e.name==r}));i?(i.peer=t,this.sendPlayer(i)):this.players.push({peer:t,name:r,words:[],scored:[]}),this.sendWords();break;case"chosen":this.players.find((function(e){return e.peer===t})).words=r;break;case"scored":this.players.find((function(e){return e.peer===t})).scored=r;break}}catch(o){console.log(o)}}}}),R=T,D=(n("4fa5"),Object(p["a"])(R,q,E,!1,null,"6223d870",null)),G=D.exports,H={components:{guest:J,host:G},data:function(){return{station:!1}},mounted:function(){this.station=this.$route.params.room===this.peerId?"host":"guest"}},B=H,A=Object(p["a"])(B,P,N,!1,null,null,null),Q=A.exports,Y=new w["a"]({routes:[{path:"/",component:j["default"]},{path:"/:room",component:Q}]});s["a"].use(w["a"]),s["a"].use(L),s["a"].config.productionTip=!1,new s["a"]({router:Y,render:function(t){return t(v)}}).$mount("#app")},6:function(t,e){},"64b4":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r}));var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{on:{click:function(e){return t.$router.push(t.peerId)}}},[t._v("Create New Room")])])},r=[]},6860:function(t,e,n){},7:function(t,e){},"72c5":function(t,e,n){"use strict";var s=n("64b4"),r=n("013a"),i=n("2877"),o=Object(i["a"])(r["default"],s["a"],s["b"],!1,null,null,null);e["default"]=o.exports},8:function(t,e){},"85ec":function(t,e,n){},"861b":function(t,e,n){},"8baf":function(t,e,n){"use strict";var s=n("6860"),r=n.n(s);r.a},db32:function(t,e){},db5d:function(t,e,n){}});
//# sourceMappingURL=app.2aab6a64.js.map